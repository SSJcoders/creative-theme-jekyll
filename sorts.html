
<!Doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
  <meta name="viewport" content="width=device-width">
  <title>sort</title>
</head>
<style>
  table.type11 {
  border-collapse: separate;
  border-spacing: 1px;
  text-align: center;
  line-height: 1.5;
  margin: 20px 10px;
  margin: 0 auto;
}
table.type11 th {
  width: 155px;
  padding: 10px;
  font-weight: bold;
  vertical-align: top;
  color: #fff;
  background: #ce4869 ;
  margin: 0 auto;
}
table.type11 td {
  width: 155px;
  padding: 10px;
  vertical-align: top;
  border-bottom: 1px solid #ccc;
  background: #eee;
  margin: 0 auto;
}
.navbar {
  display: flex;
  background-color: #333;
}

/* Style the navigation bar links */
.navbar a {
  color: white;
  padding: 14px 20px;
  text-decoration: none;
  text-align: center;
}

/* Change color on hover */
.navbar a:hover {
  background-color: #ddd;
  color: black;
}

/* Column container */
.row {  
  display: flex;
  flex-wrap: wrap;
}

/* Create two unequal columns that sits next to each other */
/* Sidebar/left column */
.side {
  flex: 30%;
  background-color: #f1f1f1;
  padding: 20px;
}

/* Main column */
.main {
  flex: 70%;
  background-color: white;
  padding: 20px;
}

/* Fake image, just for this example */
.fakeimg {
  background-color: #aaa;
  width: 100%;
  padding: 20px;
}
#block {					
            border: dashed red 3px;	
            width:800px;
            margin: 0 auto;
        }

        .inline { 						
            background-color:aquamarine; 
        }

/* Footer */
.footer {
  padding: 20px;
  text-align: center;
  background: #ddd;
}
input[type=range] {
	width:100%;
	-webkit-appearance: none;
	background: blue;
}
* {
  margin: 0;
  padding: 0;
  border-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
}

body {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #d2f7d3;
}

#cursor {
  position: fixed;
  z-index: 100;
  left: 0;
  top: 0;
  pointer-events: none;
  will-transfrm: transform;
}

.cursor__inner {
  width: 4rem;
  height: 4rem;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid #9e57d9;
  transition: all .6s cubic-bezier(0.16, 1, 0.3, 1),
              opacity .3s cubic-bezier(0.16, 1, 0.3, 1);
}

.hide .cursor__inner {
  opacity: 0;
  width: 2.5vw;
  height: 2.5vw;
}

#cursor.overlay {
  z-index: 1;
}

.overlay .cursor__inner {
  width: 3rem;
  height: 3rem;
  background-color: #c185f230;
  border-color: transparent;
}

.button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 200px;
  height: 200px;
  text-decoration: none;
  border-radius: 50%;
  border: 1px solid #c185f2;
  text-align: center;
  color: #9e57d9;
  font-family: "Venn-extended", sans-serif;
  text-transform: uppercase;
  font-weight: bolder;
  transition: all .3s cubic-bezier(0.16, 1, 0.3, 1);
}

.button .button-text {
  position: absolute;
}

.button .foreground-text {
  opacity: 0;
  z-index: 1;
  color: #f7f7f7;
}

.button::after {
  content: "";
  position: relative;
  z-index: 0;
  width: 0;
  height: 0;
  border-radius: 50%;
  background-color: #ffffff;
  transition: all .6s cubic-bezier(0.16, 1, 0.3, 1);
}

@media (hover: hover) and (pointer: fine) {
  .button:hover {
    border-color: transparent;
  }
  
  .button:hover::after {
    width: 100%;
    height: 100%;
  }
  
  .button:hover .button-text.foreground-text {
    opacity: 1;
    color: #9e57d9;
  }
}
.rad-label {
  display: flex;
  align-items: center;

  border-radius: 100px;
  padding: 14px 16px;
  margin: 10px 0;

  cursor: pointer;
  transition: .3s;
}

.rad-label:hover,
.rad-label:focus-within {
  background: hsla(0, 0%, 80%, .14);
}

.rad-input {
  position: absolute;
  left: 0;
  top: 0;
  width: 1px;
  height: 1px;
  opacity: 0;
  z-index: -1;
}

.rad-design {
  width: 22px;
  height: 22px;
  border-radius: 100px;

  background: linear-gradient(to right bottom, hsl(154, 97%, 62%), hsl(225, 97%, 62%));
  position: relative;
}

.rad-design::before {
  content: '';

  display: inline-block;
  width: inherit;
  height: inherit;
  border-radius: inherit;

  background: hsl(0, 0%, 90%);
  transform: scale(1.1);
  transition: .3s;
}

.rad-input:checked+.rad-design::before {
  transform: scale(0);
}

.rad-text {
  color: hsl(0, 0%, 60%);
  margin-left: 14px;
  letter-spacing: 3px;
  text-transform: uppercase;
  font-size: 18px;
  font-weight: 900;

  transition: .3s;
}

.rad-input:checked~.rad-text {
  color: hsl(0, 0%, 40%);
}


.abs-site-link {
  position: fixed;
  bottom: 40px;
  left: 20px;
  color: hsla(0, 0%, 0%, .5);
  font-size: 16px;
}
</style>
<body>
  <div class="content">
    <h1>Sorting Algorithms</h1>
    <div id ="block">
        <form name="flexForm">
            <label class="rad-label"><input type="radio" name="fDTypes" value="MergeSort" class="rad-input" name="rad" checked><div class="rad-design"></div>Merge Sort </label>
        
            <label class="rad-label"><input type="radio" name="fDTypes" value="BubbleSort" class="rad-input" name="rad"><div class="rad-design"></div>Bubble Sort</label>
        
            <label class="rad-label"><input type="radio" name="fDTypes" class="rad-input" value="InsertionSort" name="rad"><div class="rad-design"></div>Insertion Sort</label>
            <label class="rad-label"><input type="radio" name="fDTypes" class="rad-input" value="SelectionSort" name="rad"><div class="rad-design"></div>Selection Sort</label>
        </form>
        
          
        <br>
        <div>
            <input type="number" id="InputNumber" placeholder="Enter Number!"> 
            <button onclick="setValue()">Set value</button>
        </div>
        
        <font size = 2 id = "slider_value_view">10000</font> 
        <input class="slider_range" oninput = 'ShowSliderValue(this.value)' value="10000" style="width: 800px" type="range" min="10000" max="100000" id="userInput" autofocus>
    
    </div>
    
    <br><br>
    <table class="type11">
        <thead>
        <tr>
          <th scope="cols">Sorting Method</th>
          <th scope="cols">Number</th>
          <th scope="cols">Time</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td id = "method"></th>
          <td id = "NumValue"></th>
          <td id = "time"></th>
        </tr>
        </tbody>
      </table>
    <br><br>
    <div class="container">
        <div id="cursor">
          <div class="cursor__inner"></div>
        </div>
        <a class="button" onclick="Sorting()" cursor-class="overlay">
            <span class="button-text">Click</span>
            <span class="button-text foreground-text">Sort</span>
          </a>
    </div>
    <br><br>
    <button id="graphButton" onclick="createGraph()" >Show Graph</button>
    <div id ="myDiv"></div>


    
  </div>
</body>
</html>
<script>
    const cursor = document.querySelector("#cursor")

let mouse = { x: -100, y: -100 }
let pos = { x: 0, y: 0 }
const speed = 0.1

const updateCoordinates = (e) => {
  mouse.x = e.clientX
  mouse.y = e.clientY
}

window.addEventListener("mousemove", updateCoordinates)

const updatePosition = () => {
  pos.x += (mouse.x - pos.x) * speed
  pos.y += (mouse.y - pos.y) * speed
  cursor.style.transform =
    "translate3d(" + pos.x + "px ," + pos.y + "px, 0)"
}

const loop = () => {
  updatePosition()
  requestAnimationFrame(loop)
}

requestAnimationFrame(loop)

const cursorModifiers = document.querySelectorAll("[cursor-class]")

cursorModifiers.forEach((cursorModifier) => {
  cursorModifier.addEventListener("mouseenter", function () {
    let attribute = this.getAttribute("cursor-class")
    cursor.classList.add(attribute)
  })
  
  cursorModifier.addEventListener("mouseleave", function () {
    let attribute = this.getAttribute("cursor-class")
    cursor.classList.remove(attribute)
  })
})
async function Sorting() {
    url = "http://localhost:8085/api/";
    var num = document.getElementById("userInput").value;
    var form = document.forms["flexForm"];
    var sortingMethod;
    for (var i = 0; i < form.fDTypes.length; i++) {
        if (form.fDTypes[i].checked) {
            sortingMethod = form.fDTypes[i].value;
            break;
        }
    }
    if (sortingMethod === "SelectionSort") {
        const numData = {
                "number": num
        };

        try {
            const response = await fetch(url + "select/", {
                method: "POST",
                cache: 'no-cache',
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(numData)
                });

                if (response.ok) {
                    const responseData = await response.json();
                    document.getElementById("time").textContent = responseData;
                    document.getElementById("NumValue").textContent = num;
                    document.getElementById("method").textContent = sortingMethod;
                    
                } else {
                    console.error("API request failed");
                }
            } catch (error) {
                console.error("Error:", error);
            }
    } else if (sortingMethod === "InsertionSort") {
        const numData = {
                "number": num
        };

        try {
            const response = await fetch(url + "insert/", {
                method: "POST",
                cache: 'no-cache',
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(numData)
                });

                if (response.ok) {
                    const responseData = await response.json();
                    document.getElementById("time").textContent = responseData;
                    document.getElementById("NumValue").textContent = num;
                    document.getElementById("method").textContent = sortingMethod;
                    
                } else {
                    console.error("API request failed");
                }
            } catch (error) {
                console.error("Error:", error);
            }
    } else if (sortingMethod === "BubbleSort") {
        const numData = {
                "number": num
        };

        try {
            const response = await fetch(url + "bubble/", {
                method: 'POST',
                cache: 'no-cache',
                 headers: {
                "Content-Type": "application/json"
                },
                body: JSON.stringify(numData)
            });

            if (response.ok) {
                const responseData = await response.json();
                document.getElementById("time").textContent = responseData ;
                document.getElementById("NumValue").textContent = num;
                document.getElementById("method").textContent = sortingMethod;
            } else {
                console.error("API request failed");
            }
        } catch (error) {
                console.error("Error:", error);
        }
    } else if (sortingMethod === "MergeSort"){
        const numData = {
                "number": num
        };

        try {
            const response = await fetch(url + "merge/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(numData)
            });

            if (response.ok) {
                const responseData = await response.json();
                document.getElementById("time").textContent = responseData;
                document.getElementById("NumValue").textContent = num;
                document.getElementById("method").textContent = sortingMethod;
                
            } else {
                console.error("API request failed");
            }
        } catch (error) {
            console.error("Error:", error);
        }
    }
    console.log("Selected Sorting Method: " + sortingMethod);

}
function setValue() {
    var a = document.getElementById("InputNumber");
    document.getElementById("userInput").value = a.value;
    ShowSliderValue(a.value);
}
function createGraph() {
    var selectTempX = [];
var selectTempY = [];
var mergeTempX = [];
var mergeTempY = [];
var bubbleTempX = [];
var bubbleTempY = [];
var insertTempX = [];
var insertTempY = [];

var trace1, trace2, trace3, trace4;

// Create an array of promises for all fetch calls
var promises = [
    fetch("http://localhost:8085/api/select/get")
        .then(response => response.json())
        .then(data => {
            selectTempX = data.map(Datas => Datas.number / 100);
            selectTempY = data.map(Datas => Datas.time);
            trace1 = {
                x: selectTempX,
                y: selectTempY,
                mode: 'markers',
                type: 'scatter',
                name: 'Selection Sort',
                marker: { size: 12 }
            };
        }),

    fetch("http://localhost:8085/api/merge/get")
        .then(response => response.json())
        .then(data => {
            mergeTempX = data.map(Datas => Datas.number / 100);
            mergeTempY = data.map(Datas => Datas.time);
            trace2 = {
                x: mergeTempX,
                y: mergeTempY,
                mode: 'markers',
                type: 'scatter',
                name: 'Merge Sort',
                marker: { size: 12 }
            };
        }),

    fetch("http://localhost:8085/api/bubble/get")
        .then(response => response.json())
        .then(data => {
            bubbleTempX = data.map(Datas => Datas.number / 100);
            bubbleTempY = data.map(Datas => Datas.time);
            trace3 = {
                x: bubbleTempX,
                y: bubbleTempY,
                mode: 'markers',
                type: 'scatter',
                name: 'Bubble Sort',
                marker: { size: 12 }
            };
        }),

    fetch("http://localhost:8085/api/insert/get")
        .then(response => response.json())
        .then(data => {
            insertTempX = data.map(Datas => Datas.number / 100);
            insertTempY = data.map(Datas => Datas.time);
            trace4 = {
                x: insertTempX,
                y: insertTempY,
                mode: 'markers',
                type: 'scatter',
                name: 'Insertion Sort',
                marker: { size: 12 }
            };
        })
];

// Wait for all promises to resolve
Promise.all(promises)
    .then(() => {
        // Now you can use trace1, trace2, trace3, and trace4 here
        var data = [trace1, trace2, trace3, trace4];

        var layout = {
            xaxis: {
                range: [90, 1001]
            },
            yaxis: {
                range: [0, 10000]
            },
            legend: {
                y: 0.5,
                yref: 'paper',
                font: {
                    family: 'Arial, sans-serif',
                    size: 20,
                    color: 'grey',
                }
            },
            title: 'Data Labels on the Plot'
        };

        // Finally, create the plot
        Plotly.newPlot('myDiv', data, layout);
    })
    .catch(error => {
        console.error('Error fetching data:', error);
    });

}
function ShowSliderValue(sVal)
{
 var obValueView = document.getElementById("slider_value_view");
 obValueView.innerHTML = sVal
}


</script>